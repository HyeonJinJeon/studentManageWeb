{"remainingRequest":"/Users/jicode/__run/project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jicode/__run/project/src/views/PostWrite.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jicode/__run/project/src/views/PostWrite.vue","mtime":1673315029843},{"path":"/Users/jicode/__run/project/node_modules/cache-loader/dist/cjs.js","mtime":1672636077197},{"path":"/Users/jicode/__run/project/node_modules/babel-loader/lib/index.js","mtime":1672636077430},{"path":"/Users/jicode/__run/project/node_modules/cache-loader/dist/cjs.js","mtime":1672636077197},{"path":"/Users/jicode/__run/project/node_modules/vue-loader/lib/index.js","mtime":1672636088858}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYwoKaW1wb3J0IHtmaXJlYmFzZX0gZnJvbSAnQC9maXJlYmFzZS9maXJlYmFzZUNvbmZpZyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1Bvc3RXcml0ZScsCiAgZGF0YSgpewogICAgcmV0dXJuIHsKICAgICAgcm93OiB7fSwKICAgICAgZmJDb2xsZWN0aW9uOiAnYm9hcmQnLAogICAgICB0aXRsZTogJycsCiAgICAgIGNvbnRlbnRzOiAnJywKICAgICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY2FuY2xlQWRkKCl7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvYm9hcmQnKQogICAgfSwKICAgIGdldERhdGEoKXsKICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7CiAgICAgIGNvbnN0IGRiID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7CiAgICAgIGRiLmNvbGxlY3Rpb24oJ3N0dWRlbnRzJykKICAgICAgICAgIC5kb2Moc2VsZi4kc3RvcmUuc3RhdGUudXNlci51aWQpCiAgICAgICAgICAuZ2V0KCkKICAgICAgICAgIC50aGVuKChzbmFwc2hvdCkgID0+IHsKICAgICAgICAgICAgY29uc3QgX2RhdGEgPSBzbmFwc2hvdC5kYXRhKCk7CiAgICAgICAgICAgIHRoaXMucm93ID0gX2RhdGEKICAgICAgICAgIH0pCiAgICB9LAogICAgYWRkUG9zdCgpewogICAgICBjb25zdCBzZWxmID0gdGhpczsgICAgICAgICAvLyBzZWxm66W8IOyTsOuKlCDsnbTsnKDripQg67CU6rml7J2YIHRoaXPrk6Tqs7wg7ZaH6rCI66as7KeAIOyViuq4sCDsnITtlbTshJwKICAgICAgY29uc3QgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsKICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICAgICAgY29uc3QgX2RhdGEgPSB7ICAgICAgICAgICAgLy8gZGF0YSgp7JeQIOyeiOuKlCDrjbDsnbTthLDqsIAg67CU66GcIOuTpOyWtOqwiCDsiJgg7JeG64ukLgogICAgICAgIHRpdGxlOiBzZWxmLnRpdGxlLAogICAgICAgIGNvbnRlbnRzOiBzZWxmLmNvbnRlbnRzLAogICAgICAgIHRpbWU6IG5vdywKICAgICAgICB1aWQ6IHNlbGYuJHN0b3JlLnN0YXRlLnVzZXIudWlkLAogICAgICAgIHN0dWRlbnQ6IHsKICAgICAgICAgIG5hbWU6IHRoaXMucm93Lm5hbWUsCiAgICAgICAgICBncmFkZTogdGhpcy5yb3cuZ3JhZGUsCiAgICAgICAgfSwKICAgICAgfQogICAgICBkYi5jb2xsZWN0aW9uKHNlbGYuZmJDb2xsZWN0aW9uKSAvLzwtIGNvbGxlY3Rpb24oJ+y7rOuemeyFmOuqhScpIOuwlOuhnCDsk7jsiJjsnojri6QuCiAgICAgICAgICAuYWRkKF9kYXRhKQogICAgICAgICAgLnRoZW4oKCkgPT4geyAgICAgICAgICAgIC8vIOyVhOustCDrrLjsoJzsl4bsnbQg7JyX7Kq9IOy9lOuTnOqwgCDri6Qg7ISx6rO17ZWY66m0IHRoZW7snbQg7Iuk7ZaJCiAgICAgICAgICAgIGFsZXJ0KCLsoIDsnqXrkJjsl4jsirXri4jri6QiKQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2JvYXJkJykKICAgICAgICAgIH0pICAvLyDshLHqs7XtlZjrqbQg66y07JeH7J2EIO2VoOqxtOyngCDsoJXtlZjrqbQg65Cc64ukLyDsnbQg7L2U65Oc7JeQ7ISgIGFsZXJ06rCAIOyLpO2WieuQnOuLpAoKICAgICAgICAgIC5jYXRjaCgoZSkgPT4geyAgICAgICAgICAvLyDsi6TtjKjtlZjrqbQgY2F0Y2jqsIAg7Iuk7ZaJ65Cc64ukLiBl64qUIGVycmVy7J2YIOyVveyekAogICAgICAgICAgICBjb25zb2xlLmxvZyhlKQogICAgICAgICAgICBhbGVydCgi7KCA7J6l7JeQIOyLpO2MqO2WiOyKteuLiOuLpC4iKQogICAgICAgICAgfSkKICAgIH0sCiAgICBpbml0KCl7CiAgICAgIHRoaXMuZ2V0RGF0YSgpCgogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICBjb25zdCBzZWxmID0gdGhpczsKICAgIHNlbGYuaW5pdCgpOwogIH0sCiAgY29tcG9uZW50czogewoKICB9Cn0K"},{"version":3,"sources":["PostWrite.vue"],"names":[],"mappings":";AAgBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"PostWrite.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home\">\n    <nav class=\"navbar navbar-expand-md navbar-dark bg-dark fixed-top\">\n      <a class=\"navbar-brand\" href=\"#\">학생 관리 시스템</a>\n    </nav>\n    <h4>제목</h4>\n    <input v-model=\"title\"><br><br>\n    <h4>내용</h4>\n    <input type=\"textarea\" v-model=\"contents\"><br><br>\n    <h4>작성자: {{row.name}}</h4>\n    <b-button variant=\"success\" @click=\"addPost\">작성완료</b-button>\n    <b-button variant=\"danger\" @click=\"cancleAdd\">취소하기</b-button>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n\nimport {firebase} from '@/firebase/firebaseConfig';\n\nexport default {\n  name: 'PostWrite',\n  data(){\n    return {\n      row: {},\n      fbCollection: 'board',\n      title: '',\n      contents: '',\n      }\n  },\n  methods: {\n    cancleAdd(){\n      this.$router.push('/board')\n    },\n    getData(){\n      const self = this;\n      const db = firebase.firestore();\n      db.collection('students')\n          .doc(self.$store.state.user.uid)\n          .get()\n          .then((snapshot)  => {\n            const _data = snapshot.data();\n            this.row = _data\n          })\n    },\n    addPost(){\n      const self = this;         // self를 쓰는 이유는 바깥의 this들과 햇갈리지 않기 위해서\n      const db = firebase.firestore();\n      const now = new Date();\n      const _data = {            // data()에 있는 데이터가 바로 들어갈 수 없다.\n        title: self.title,\n        contents: self.contents,\n        time: now,\n        uid: self.$store.state.user.uid,\n        student: {\n          name: this.row.name,\n          grade: this.row.grade,\n        },\n      }\n      db.collection(self.fbCollection) //<- collection('컬랙션명') 바로 쓸수있다.\n          .add(_data)\n          .then(() => {            // 아무 문제없이 윗쪽 코드가 다 성공하면 then이 실행\n            alert(\"저장되었습니다\")\n            this.$router.push('/board')\n          })  // 성공하면 무엇을 할건지 정하면 된다/ 이 코드에선 alert가 실행된다\n\n          .catch((e) => {          // 실패하면 catch가 실행된다. e는 errer의 약자\n            console.log(e)\n            alert(\"저장에 실패했습니다.\")\n          })\n    },\n    init(){\n      this.getData()\n\n    },\n  },\n  mounted() {\n    const self = this;\n    self.init();\n  },\n  components: {\n\n  }\n}\n</script>\n"]}]}